[gd_scene format=3 uid="uid://cepvh1ouy1bfe"]

[sub_resource type="GDScript" id="GDScript_rlfdb"]
script/source = "extends Node2D

signal oxygen_changed(value: float)

@onready var max_oxygen: float = 100.0
@onready var current_oxygen: float = 100.0
@onready var is_underwater: bool = false
@onready var drain_rate: float = 10.0
@onready var refill_rate: float = 20.0

func _process(delta: float) -> void:
	if is_underwater:
		current_oxygen -= drain_rate * delta
		current_oxygen = max(current_oxygen, 0.0)
	else:
		current_oxygen = clamp(current_oxygen, 0.0, max_oxygen) 
		current_oxygen += refill_rate * delta
		current_oxygen = min(current_oxygen, max_oxygen)

	emit_signal(\"oxygen_changed\", current_oxygen)

	if current_oxygen <= 0.0:
		_on_suffocate()

func _on_suffocate() -> void:
	print(\"Suffocating!\")  # replace with your damage logic
"

[node name="Oxygen_bar" type="Node2D" unique_id=1130081990]
script = SubResource("GDScript_rlfdb")

[node name="ProgressBar" type="ProgressBar" parent="." unique_id=1764920301]
self_modulate = Color(1.5645489, 7.5530915, 18.892157, 1)
offset_left = -112.0
offset_top = -15.0
offset_right = 158.0
offset_bottom = 12.0
value = 100.0
show_percentage = false

[node name="text" type="Label" parent="ProgressBar" unique_id=1946799112]
layout_mode = 0
offset_left = 74.0
offset_right = 212.0
offset_bottom = 23.0
text = "Oxygen level"
